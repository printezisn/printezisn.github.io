---
import { getCollection } from 'astro:content';
import BlogLayout from '@layouts/blog-layout.astro';
import type { GetStaticPaths } from 'astro';
import PostList from '@components/post-list/index.astro';

export const getStaticPaths = (async ({ paginate }) => {
  const posts = (await getCollection('posts')).sort(
    (a, b) => b.data.date.getTime() - a.data.date.getTime(),
  );

  return paginate(posts, { pageSize: 10 });
}) satisfies GetStaticPaths;

const { page } = Astro.props;
const title =
  page.currentPage === 1 ? 'Blog' : `Blog - Page ${page.currentPage}`;
const path =
  page.currentPage === 1 ? '/blog/' : `/blog/posts/${page.currentPage}/`;
---

<BlogLayout
  title={`${title} | Nikos Printezis`}
  description="A collection of blog posts around engineering. They are focused in full stack engineering, with a preference towards front end though."
  path={path}
  pageTitle="Blog"
  pageLayout="sidebar"
  breadcrumbList={[
    {
      name: 'Portfolio',
      url: '/',
    },
    {
      name: title,
      url: path,
    },
  ]}
>
  <PostList posts={page} />
</BlogLayout>
